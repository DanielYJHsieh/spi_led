# aRGB LED æ•¸æ“šçµæ§‹èˆ‡å‚³è¼¸èªªæ˜

## ğŸ” aRGB LED ç¡¬é«”æ¶æ§‹

### å–®é¡† aRGB LED å…§éƒ¨çµæ§‹

```
       å–®é¡† aRGB LED (å¦‚ WS2812B)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”     â”‚
    â”‚  â”‚ RED â”‚  â”‚GREENâ”‚  â”‚BLUE â”‚     â”‚
    â”‚  â”‚ LED â”‚  â”‚ LED â”‚  â”‚ LED â”‚     â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜     â”‚
    â”‚     â†‘        â†‘        â†‘        â”‚
    â”‚  8-bit    8-bit    8-bit       â”‚
    â”‚ R_reg     G_reg    B_reg       â”‚
    â”‚     â†‘        â†‘        â†‘        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚     æ§åˆ¶IC (å…§å»º)        â”‚   â”‚
    â”‚  â”‚   - æ¥æ”¶24ä½æ•¸æ“š         â”‚   â”‚
    â”‚  â”‚   - è§£ç¢¼RGBæ§åˆ¶è¨Šè™Ÿ      â”‚   â”‚
    â”‚  â”‚   - PWMé©…å‹•LED          â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚           â†‘                    â”‚
    â”‚         DIN                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•¸æ“šçµæ§‹æ˜ å°„

æ ¹æ“š Everstars æ–‡æª”ï¼š

```cpp
// å–®é¡† aRGB LED çš„æ•¸æ“šçµæ§‹
struct LED {
    uint8_t R_reg;  // ç´…è‰²æš«å­˜å™¨ (0-255)
    uint8_t G_reg;  // ç¶ è‰²æš«å­˜å™¨ (0-255)  
    uint8_t B_reg;  // è—è‰²æš«å­˜å™¨ (0-255)
};

// å¤šé¡† aRGB LED é™£åˆ—
LED Display[3] = {
    {0xFF, 0x00, 0x00},  // LED1: ç´…è‰²
    {0x00, 0xFF, 0x00},  // LED2: ç¶ è‰²
    {0x00, 0x00, 0xFF}   // LED3: è—è‰²
};
```

## ğŸ“Š æ•¸æ“šå‚³è¼¸æµç¨‹

### Step 1: åŸå§‹æ•¸æ“šæº–å‚™

```
aRGB LED #1: R=0xFF, G=0x00, B=0x00 (ç´…è‰²)
aRGB LED #2: R=0x00, G=0xFF, B=0x00 (ç¶ è‰²)  
aRGB LED #3: R=0x00, G=0x00, B=0xFF (è—è‰²)
```

### Step 2: 8ä½åˆ°32ä½ç·¨ç¢¼è½‰æ›

æ¯å€‹8ä½é¡è‰²å€¼è½‰æ›ç‚º32ä½SPIæ•¸æ“šï¼š

```
åŸå§‹8ä½:  1 1 1 1 1 1 1 1  (0xFF)
SPIç·¨ç¢¼: 1110 1110 1110 1110 1110 1110 1110 1110
32ä½çµæœ: 0xEEEEEEEE

åŸå§‹8ä½:  0 0 0 0 0 0 0 0  (0x00)  
SPIç·¨ç¢¼: 1000 1000 1000 1000 1000 1000 1000 1000
32ä½çµæœ: 0x88888888
```

### Step 3: ç™¼é€é †åº

```
æ™‚é–“è»¸: â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’â†’

ç™¼é€é †åº:
LED1_R(32bit) â†’ LED1_G(32bit) â†’ LED1_B(32bit) â†’
LED2_R(32bit) â†’ LED2_G(32bit) â†’ LED2_B(32bit) â†’  
LED3_R(32bit) â†’ LED3_G(32bit) â†’ LED3_B(32bit) â†’
Latch(>50Î¼s)

å¯¦éš›æ•¸æ“š:
0xEEEEEEEE â†’ 0x88888888 â†’ 0x88888888 â†’  (LED1: ç´…è‰²)
0x88888888 â†’ 0xEEEEEEEE â†’ 0x88888888 â†’  (LED2: ç¶ è‰²)
0x88888888 â†’ 0x88888888 â†’ 0xEEEEEEEE â†’  (LED3: è—è‰²)
>50Î¼s ä½é›»å¹³                           (Latch Time)
```

## ğŸ¯ é—œéµæ¦‚å¿µæ¾„æ¸…

### â“ å¸¸è¦‹èª¤è§£
- **éŒ¯èª¤ç†è§£**: ä»¥ç‚ºéœ€è¦æ§åˆ¶9å€‹ç¨ç«‹çš„LED (3Ã—3)
- **æ­£ç¢ºç†è§£**: æ§åˆ¶3é¡†aRGB LEDï¼Œæ¯é¡†å…§å»ºR+G+Bä¸‰å€‹ç™¼å…‰å…ƒä»¶

### âœ… æ­£ç¢ºæ¦‚å¿µ

1. **ç¡¬é«”å±¤é¢**:
   - 3é¡†ç‰©ç†aRGB LED
   - æ¯é¡†LEDå…§å»º3å€‹ç™¼å…‰å…ƒä»¶ (R+G+B)
   - æ¯é¡†LEDæœ‰ä¸€å€‹æ§åˆ¶IC

2. **è»Ÿé«”å±¤é¢**:
   - 3å€‹LEDçµæ§‹é«”
   - æ¯å€‹çµæ§‹é«”åŒ…å«3å€‹8ä½æš«å­˜å™¨
   - ç¸½å…±éœ€è¦å‚³è¼¸ 3Ã—24=72 ä½åŸå§‹æ•¸æ“š

3. **å‚³è¼¸å±¤é¢**:
   - 72ä½åŸå§‹æ•¸æ“šç·¨ç¢¼ç‚º 3Ã—3Ã—32=288 ä½SPIæ•¸æ“š
   - åŠ ä¸ŠLatch Timeå®Œæˆä¸€æ¬¡å®Œæ•´å‚³è¼¸

## ğŸ”¬ é‚è¼¯åˆ†æå„€è§€å¯Ÿé‡é»

åœ¨LAä¸Šä½ æ‡‰è©²çœ‹åˆ°ï¼š

```
CH0 (DATA): 
â”Œâ”€å®Œæ•´å‚³è¼¸é€±æœŸâ”€â”
â”‚ 288ä½SPIæ•¸æ“š â”‚ >50Î¼sä½é›»å¹³
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ™‚åºåˆ†è§£:
- LED1_R: 32ä½ (ç´„9.6Î¼s)
- LED1_G: 32ä½ (ç´„9.6Î¼s)  
- LED1_B: 32ä½ (ç´„9.6Î¼s)
- LED2_R: 32ä½ (ç´„9.6Î¼s)
- LED2_G: 32ä½ (ç´„9.6Î¼s)
- LED2_B: 32ä½ (ç´„9.6Î¼s)
- LED3_R: 32ä½ (ç´„9.6Î¼s)
- LED3_G: 32ä½ (ç´„9.6Î¼s)
- LED3_B: 32ä½ (ç´„9.6Î¼s)
- Latch:  >50Î¼s
ç¸½æ™‚é–“: ç´„137Î¼s
```

## ğŸ’¡ å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹

### å½©è‰²æ··åˆç¯„ä¾‹

```cpp
// å‰µå»ºæ©™è‰² (ç´…+ç¶ æ··åˆ)
Display[0].R_reg = 0xFF;  // ç´…è‰²å…¨äº®
Display[0].G_reg = 0x80;  // ç¶ è‰²åŠäº®  
Display[0].B_reg = 0x00;  // è—è‰²é—œé–‰

// å‰µå»ºç´«è‰² (ç´…+è—æ··åˆ)
Display[1].R_reg = 0x80;  // ç´…è‰²åŠäº®
Display[1].G_reg = 0x00;  // ç¶ è‰²é—œé–‰
Display[1].B_reg = 0xFF;  // è—è‰²å…¨äº®

// å‰µå»ºç™½è‰² (ä¸‰è‰²å…¨äº®)
Display[2].R_reg = 0xFF;  // ç´…è‰²å…¨äº®
Display[2].G_reg = 0xFF;  // ç¶ è‰²å…¨äº®
Display[2].B_reg = 0xFF;  // è—è‰²å…¨äº®
```

é€™æ¨£å°±èƒ½åœ¨3é¡†aRGB LEDä¸Šé¡¯ç¤ºæ©™è‰²ã€ç´«è‰²å’Œç™½è‰²ï¼
